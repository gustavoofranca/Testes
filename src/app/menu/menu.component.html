<div class="container">
  <app-navbar variant="home"></app-navbar>

  <div class="search-bar">
    <input 
      type="text" 
      [(ngModel)]="searchTerm" 
      placeholder="Buscar no cardápio..."
      (input)="filterItems()">
  </div>

  <main class="menu-content">
    <section class="menu-section" *ngIf="filteredItems.burger.length">
      <h2>Hambúrgueres</h2>
      <div class="menu-grid">
        <div class="menu-item" *ngFor="let burger of filteredItems.burger">
          <img [src]="burger.imageUrl" [alt]="burger.name">
          <div class="menu-item-content">
            <h3>{{burger.name}}</h3>
            <p class="description">{{burger.description}}</p>
            <div class="item-footer">
              <p class="price">R$ {{burger.price.toFixed(2)}}</p>
              <button class="add-to-cart" (click)="addToCart(burger)">
                <i class="fas fa-shopping-cart"></i>
                Adicionar
              </button>
            </div>
            <div class="rating">
              <div class="stars">
                <i class="fas fa-star" *ngFor="let star of [1,2,3,4,5]"
                   [class.active]="star <= (burger.rating || 0)"
                   (click)="rateItem(burger, star)"></i>
              </div>
              <span *ngIf="burger.rating">({{burger.rating}})</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="menu-section" *ngIf="filteredItems.side.length">
      <h2>Acompanhamentos</h2>
      <div class="menu-grid">
        <div class="menu-item" *ngFor="let side of filteredItems.side">
          <img [src]="side.imageUrl" [alt]="side.name">
          <div class="menu-item-content">
            <h3>{{side.name}}</h3>
            <p class="description">{{side.description}}</p>
            <div class="item-footer">
              <p class="price">R$ {{side.price.toFixed(2)}}</p>
              <button class="add-to-cart" (click)="addToCart(side)">
                <i class="fas fa-shopping-cart"></i>
                Adicionar
              </button>
            </div>
            <div class="rating">
              <div class="stars">
                <i class="fas fa-star" *ngFor="let star of [1,2,3,4,5]"
                   [class.active]="star <= (side.rating || 0)"
                   (click)="rateItem(side, star)"></i>
              </div>
              <span *ngIf="side.rating">({{side.rating}})</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="menu-section" *ngIf="filteredItems.drink.length">
      <h2>Bebidas</h2>
      <div class="menu-grid">
        <div class="menu-item" *ngFor="let drink of filteredItems.drink">
          <img [src]="drink.imageUrl" [alt]="drink.name">
          <div class="menu-item-content">
            <h3>{{drink.name}}</h3>
            <p class="description">{{drink.description}}</p>
            <div class="item-footer">
              <p class="price">R$ {{drink.price.toFixed(2)}}</p>
              <button class="add-to-cart" (click)="addToCart(drink)">
                <i class="fas fa-shopping-cart"></i>
                Adicionar
              </button>
            </div>
            <div class="rating">
              <div class="stars">
                <i class="fas fa-star" *ngFor="let star of [1,2,3,4,5]"
                   [class.active]="star <= (drink.rating || 0)"
                   (click)="rateItem(drink, star)"></i>
              </div>
              <span *ngIf="drink.rating">({{drink.rating}})</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="menu-section" *ngIf="filteredItems.sauce.length">
      <h2>Molhos</h2>
      <div class="menu-grid">
        <div class="menu-item" *ngFor="let sauce of filteredItems.sauce">
          <img [src]="sauce.imageUrl" [alt]="sauce.name">
          <div class="menu-item-content">
            <h3>{{sauce.name}}</h3>
            <p class="description">{{sauce.description}}</p>
            <div class="item-footer">
              <p class="price">R$ {{sauce.price.toFixed(2)}}</p>
              <button class="add-to-cart" (click)="addToCart(sauce)">
                <i class="fas fa-shopping-cart"></i>
                Adicionar
              </button>
            </div>
            <div class="rating">
              <div class="stars">
                <i class="fas fa-star" *ngFor="let star of [1,2,3,4,5]"
                   [class.active]="star <= (sauce.rating || 0)"
                   (click)="rateItem(sauce, star)"></i>
              </div>
              <span *ngIf="sauce.rating">({{sauce.rating}})</span>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>
</div>

<app-cart></app-cart>